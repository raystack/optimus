<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rfcs/improving_time_and_flow_of_deployment">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">improving_time_and_flow_of_deployment | Optimus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://odpf.github.io/optimus/docs/rfcs/improving_time_and_flow_of_deployment"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="improving_time_and_flow_of_deployment | Optimus"><meta data-rh="true" name="description" content="- Feature Name: Improve Time &amp; Flow of the core Optimus Job Deployment, Replay, and Backup"><meta data-rh="true" property="og:description" content="- Feature Name: Improve Time &amp; Flow of the core Optimus Job Deployment, Replay, and Backup"><link data-rh="true" rel="icon" href="/optimus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://odpf.github.io/optimus/docs/rfcs/improving_time_and_flow_of_deployment"><link data-rh="true" rel="alternate" href="https://odpf.github.io/optimus/docs/rfcs/improving_time_and_flow_of_deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://odpf.github.io/optimus/docs/rfcs/improving_time_and_flow_of_deployment" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/optimus/blog/rss.xml" title="Optimus RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/optimus/blog/atom.xml" title="Optimus Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RSCK0YREFM"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RSCK0YREFM",{anonymize_ip:!0})</script><link rel="stylesheet" href="/optimus/assets/css/styles.84bfa261.css">
<link rel="preload" href="/optimus/assets/js/runtime~main.35534b05.js" as="script">
<link rel="preload" href="/optimus/assets/js/main.0c2553fe.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#222;color:#eee" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like Optimus, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/odpf/optimus">GitHub</a>! ⭐</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/optimus/"><div class="navbar__logo"><img src="/optimus/img/logo.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/optimus/img/logo.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Optimus</b></a><a class="navbar__item navbar__link" href="/optimus/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/optimus/blog">Blog</a><a class="navbar__item navbar__link" href="/optimus/help">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://bit.ly/2RzPbtn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link"></a><a href="https://github.com/odpf/optimus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-github"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>improving_time_and_flow_of_deployment</h1></header><ul><li>Feature Name: Improve Time &amp; Flow of the core Optimus Job Deployment, Replay, and Backup</li><li>Status: Draft</li><li>Start Date: 2022-02-16</li><li>Authors: Arinda &amp; Sravan</li></ul><h1>Summary</h1><p>It is observed that the deployment of a project with more than 1000 jobs took around 6 minutes to complete, and the
replay request for the same project took around 4 minutes. An analysis to improve the time taken for this is needed,
especially if the project will be broke down to multiple namespaces. This will cause problem, as 10 namespaces might
can consume 6 minutes * 10 times.</p><h1>Technical Design</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background-">Background :<a href="#background-" class="hash-link" aria-label="Direct link to Background :" title="Direct link to Background :">​</a></h2><p>Understanding the current process of the mentioned issues:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy">Deploy<a href="#deploy" class="hash-link" aria-label="Direct link to Deploy" title="Direct link to Deploy">​</a></h3><ul><li>Resolving dependencies for all the jobs in the requested project</li><li>Resolving priorities for all the jobs</li><li>Compiling the jobs within requested namespace</li><li>Uploading compiled jobs to storage</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replay-request">Replay Request<a href="#replay-request" class="hash-link" aria-label="Direct link to Replay Request" title="Direct link to Replay Request">​</a></h3><ul><li>Resolving dependencies for all the jobs in the requested project</li><li>Clearing scheduler dag run(s)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup-request">Backup Request<a href="#backup-request" class="hash-link" aria-label="Direct link to Backup Request" title="Direct link to Backup Request">​</a></h3><ul><li>Resolving dependencies for all the jobs in the requested project</li><li>Duplicate table</li></ul><p>All the processes above need dependency resolution. When resolving dependency, it is being done for ALL the jobs in the
project, regardless of the namespace and regardless if it has changed or not. For every job (bq2bq for example), Optimus
will call each of the jobs the GenerateDependencies function in the plugin, and do a dry run hitting the Bigquery API.
This process has been done in parallel.</p><p>To simulate, let’s say there are 1000 bq2bq jobs in a project.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    Job     |   Upstream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A       |   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B       |   A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C       |   A, B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D       |   C       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...     |   ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There is a change in job C, that it no longer has dependency to job A. When it happens, when deploying, currently
Optimus will resolve dependencies for all 1000 jobs. While in fact, the changed dependencies will only happen for job C.
There is only a slight difference where upstream is no longer A and B but only B.</p><p>Currently, Optimus is resolving dependencies every time it is needed because it is not stored anywhere, due to keep
changing dependencies. However, now we are seeing a timing problem, and the fact that not all jobs need to be dependency
resolved everytime there’s a deployment, a modification can be considered.</p><p>As part of this issue, we are also revisiting the current flow of job deployment process.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expected-behavior">Expected Behavior<a href="#expected-behavior" class="hash-link" aria-label="Direct link to Expected Behavior" title="Direct link to Expected Behavior">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-job">Deploy Job<a href="#deploy-job" class="hash-link" aria-label="Direct link to Deploy Job" title="Direct link to Deploy Job">​</a></h3><p>Accepts the whole state of the namespace/project. What is not available will be deleted.</p><ul><li>Identify the added / modified / deleted jobs</li><li>Resolve dependency only for the added or modified jobs and persist the dependency to DB</li><li>Do priority resolution for all jobs in the project</li><li>Compile all jobs in the project</li><li>Upload the compiled jobs</li></ul><p>The difference between the expected behavior and current implementation is that we will only resolve dependency for
what are necessary, and we will compile all the jobs in the project regardless the namespace. Compile and deploy all
jobs in the project is necessary to avoid below use case:</p><p>Let&#x27;s say in a single project, lies these 4 jobs. Job C depend on Job B, job B depend on Job A, and Job A and Job D are
independent. Notice that Job C is in a different namespace.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Job A (Namespace 1)             : weight 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- Job B (Namespace 1)         : weight 90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- Job C (Namespace 2)     : weight 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- Job D (Namespace 1)         : weight 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now let&#x27;s say Job E (Namespace 1) is introduced and Job B is no longer depend directly on Job A, but instead to the new
Job E.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Job A (Namespace 1)             : weight 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- Job E (Namespace 1)         : weight 90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- Job B (Namespace 1)     : weight 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       |-- Job C (Namespace 2) : weight 70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- Job D (Namespace 1)         : weight 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that Job C priority weight has been changed. This example shows that even though the changes are in Namespace 1,
the other namespace is also affected and needs to be recompiled and deployed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-job">Create Job<a href="#create-job" class="hash-link" aria-label="Direct link to Create Job" title="Direct link to Create Job">​</a></h3><p>Accept a single/multiple jobs to be created and deployed.</p><ul><li>Resolve dependency for the requested job and persist the dependency to DB</li><li>Do priority resolution for all jobs in the project</li><li>Compile all jobs in the project</li><li>Upload the compiled jobs</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-job">Delete Job<a href="#delete-job" class="hash-link" aria-label="Direct link to Delete Job" title="Direct link to Delete Job">​</a></h3><ul><li>Identify any dependent jobs using dependencies table</li><li>Delete only if there are no dependencies
TBD: Doing soft delete or move the deleted jobs to a different table</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="refresh-job">Refresh Job<a href="#refresh-job" class="hash-link" aria-label="Direct link to Refresh Job" title="Direct link to Refresh Job">​</a></h3><p>Using current state of job that has been stored, redo the dependency resolution, recompile, redeploy.
Can be useful to do clean deploy or upgrading jobs.</p><ul><li>Resolve dependency for all jobs in the namespace/project and persist to DB</li><li>Do priority resolution for all jobs in the project</li><li>Compile all jobs in the project</li><li>Upload the compiled jobs</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-resource">Create Resource<a href="#create-resource" class="hash-link" aria-label="Direct link to Create Resource" title="Direct link to Create Resource">​</a></h3><ul><li>Deploy the requested resource</li><li>Identify jobs that are dependent to the resource</li><li>Resolve dependency for the jobs found</li><li>Compile all jobs in the project</li><li>Upload the compiled jobs
An explanation of this behaviour can be found in <code>Handling Modified View</code> section</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-resource">Delete Resource<a href="#delete-resource" class="hash-link" aria-label="Direct link to Delete Resource" title="Direct link to Delete Resource">​</a></h3><ul><li>Identify jobs that are dependent to the requested resource</li><li>Delete only if there are no dependencies</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replay--backup">Replay &amp; Backup<a href="#replay--backup" class="hash-link" aria-label="Direct link to Replay &amp; Backup" title="Direct link to Replay &amp; Backup">​</a></h3><ul><li>Get the dependencies from the dependencies table.</li><li>Continue to build the tree.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="approach-">Approach :<a href="#approach-" class="hash-link" aria-label="Direct link to Approach :" title="Direct link to Approach :">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="checking-which-jobs-are-modified">Checking which jobs are modified?<a href="#checking-which-jobs-are-modified" class="hash-link" aria-label="Direct link to Checking which jobs are modified?" title="Direct link to Checking which jobs are modified?">​</a></h3><p>Currently, Optimus receives all the jobs to be deployed, compares which one to be deleted and which one to keep,
resolves and compiles them all. Optimus does not know the state of which changed.</p><p>One of the possibilities is by using Job hash. Fetch the jobs from DB, hash and compare with the one requested.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence">Persistence<a href="#persistence" class="hash-link" aria-label="Direct link to Persistence" title="Direct link to Persistence">​</a></h3><p>The process can be optimized only if the dependencies are stored, so no need to resolve it all every time it is needed.
Currently, this is the struct of JobSpec in Optimus:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> JobSpec </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ID             uuid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">UUID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name           </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dependencies   </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">JobSpecDependency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> JobSpecDependency </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Project </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ProjectSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Job     </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">JobSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type    JobSpecDependencyType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Dependencies field will be filled with inferred dependency after dependency resolution is finished.</p><p>We can have a new table to persist the job ID dependency.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    job_id              |   UUID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    job_dependency_id   |   UUID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    Job     |   Upstream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A       |   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B       |   A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C       |   A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C       |   B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D       |   C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...     |   ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If now C has been modified to have upstream of only B, means:</p><ul><li>Record with jobID C will be deleted</li><li>Insert 1 new record: C with dependency B</li></ul><p>Advantages:</p><ul><li>Data is available even though there are pod restarts.</li><li>Better visibility of current dependencies.</li></ul><p>Disadvantages:</p><ul><li>Additional time to write/read from DB</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-based-mechanism-in-deployment">Event-Based Mechanism in Deployment<a href="#event-based-mechanism-in-deployment" class="hash-link" aria-label="Direct link to Event-Based Mechanism in Deployment" title="Direct link to Event-Based Mechanism in Deployment">​</a></h3><p>Revisiting the process of deployment:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Step                |   Deploy      | Create Job    | Refresh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolve dependency  |   Diff        | Requested     | All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolve priority    |   All         | All           | All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compile             |   All         | All           | All</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Upload              |   All         | All           | All</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that priority resolution, compilation, and upload compiled jobs needs to be done for all the jobs in the project
for all the namespaces. Each of the request can be done multiple times per minute and improvisation to speed up the
process is needed.</p><p>Whenever there is a request to do deployment, job creation, and refresh, Optimus will do dependency resolution based
on each of the cases. After it finishes, it will push an event to be picked by a worker to do priority resolution,
compilation, and upload asynchronously. There will be deduplication in the event coming in, to avoid doing duplicated
process.</p><p>There will be a get deployment status API introduced to poll whether these async processes has been finished or not.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-dependency-resolution-failure">Handling Dependency Resolution Failure<a href="#handling-dependency-resolution-failure" class="hash-link" aria-label="Direct link to Handling Dependency Resolution Failure" title="Direct link to Handling Dependency Resolution Failure">​</a></h3><p>Currently, whenever there is a single jobs that is failing in dependency resolution, and it is within the same
namespace as requested, it will fail the entire process. We are avoiding the entire deployment pipeline to be blocked
by a single job failure, but instead sending it as part of the response and proceeding the deployment until finished.
Only the failed jobs will not be deployed. There will be metrics being added to add more visibility around this.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-modified-view">Handling Modified View<a href="#handling-modified-view" class="hash-link" aria-label="Direct link to Handling Modified View" title="Direct link to Handling Modified View">​</a></h3><p>A BQ2BQ job can have a source from views. For this job, the dependency will be the underlying tables of the view. Let&#x27;s
simulate a case where there is a change in the view source.</p><p>In a project, there is view <code>X</code> that querying from table <code>A</code> and <code>B</code>. There is also table <code>C</code> that querying from View
<code>X</code>. The job dependencies for this case can be summarized as:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    Job     |   Upstream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A       |   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B       |   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C       |   A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C       |   B</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Job C has dependency to job <code>A</code> and <code>B</code>, even though it is querying from view <code>X</code>.</p><p>Imagine a case where view <code>X</code> is modified, for example no longer querying from <code>A</code> and <code>B</code>, but instead only from <code>A</code>.
Job <code>C</code> dependency will never be updated, since it is not considered as modified. There should be a mechanism where if
a view is updated, it will also resolve the dependency for the jobs that depend on the view.</p><p>To make this happen, there should be a visibility of which resources are the sources of a job, for example which job is
using this view as a destination and querying from this view. Optimus is a transformation tool, in the job spec we store
what is the transformation destination of the job. However, we are not storing what are the sources of the transformation.
The only thing we have is job dependency, not resource.</p><p>We can add a Source URNs field to the jobs specs, or create a Job Source table. Whenever there is a change in a view
through Optimus, datastore should be able to request the dependency resolution for the view&#x27;s dependent and having the
dependencies updated. We will also provide the mechanism to refresh jobs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cli-perspective">CLI Perspective<a href="#cli-perspective" class="hash-link" aria-label="Direct link to CLI Perspective" title="Direct link to CLI Perspective">​</a></h3><p>Deploy job per namespace (using DeployJobSpecification rpc)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">optimus job deploy --namespace --project</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deploy job for selected jobs (using CreateJobSpecification rpc)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">optimus job deploy --namespace --project --jobs=(job1,job2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Refresh the entire namespace/project</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">optimus job refresh --namespace --project</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Refresh the selected jobs</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">optimus job refresh --namespace --project --jobs=(job1,job2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-thoughts">Other Thoughts:<a href="#other-thoughts" class="hash-link" aria-label="Direct link to Other Thoughts:" title="Direct link to Other Thoughts:">​</a></h2><p>Cache Considerations instead of persisting to PG</p><ul><li>Might be faster as there is no additional time for write/read from DB</li><li>Data will be unavailable post pod restarts. Need to redo the dependency resolution overall</li><li>Poor visibility</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/odpf/optimus/edit/master/docs/docs/rfcs/20220216_improving_time_and_flow_of_deployment.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-03-29T21:36:52.000Z">Mar 29, 2023</time></b> by <b>Arinda Arif</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background-" class="table-of-contents__link toc-highlight">Background :</a><ul><li><a href="#deploy" class="table-of-contents__link toc-highlight">Deploy</a></li><li><a href="#replay-request" class="table-of-contents__link toc-highlight">Replay Request</a></li><li><a href="#backup-request" class="table-of-contents__link toc-highlight">Backup Request</a></li></ul></li><li><a href="#expected-behavior" class="table-of-contents__link toc-highlight">Expected Behavior</a><ul><li><a href="#deploy-job" class="table-of-contents__link toc-highlight">Deploy Job</a></li><li><a href="#create-job" class="table-of-contents__link toc-highlight">Create Job</a></li><li><a href="#delete-job" class="table-of-contents__link toc-highlight">Delete Job</a></li><li><a href="#refresh-job" class="table-of-contents__link toc-highlight">Refresh Job</a></li><li><a href="#create-resource" class="table-of-contents__link toc-highlight">Create Resource</a></li><li><a href="#delete-resource" class="table-of-contents__link toc-highlight">Delete Resource</a></li><li><a href="#replay--backup" class="table-of-contents__link toc-highlight">Replay &amp; Backup</a></li></ul></li><li><a href="#approach-" class="table-of-contents__link toc-highlight">Approach :</a><ul><li><a href="#checking-which-jobs-are-modified" class="table-of-contents__link toc-highlight">Checking which jobs are modified?</a></li><li><a href="#persistence" class="table-of-contents__link toc-highlight">Persistence</a></li><li><a href="#event-based-mechanism-in-deployment" class="table-of-contents__link toc-highlight">Event-Based Mechanism in Deployment</a></li><li><a href="#handling-dependency-resolution-failure" class="table-of-contents__link toc-highlight">Handling Dependency Resolution Failure</a></li><li><a href="#handling-modified-view" class="table-of-contents__link toc-highlight">Handling Modified View</a></li><li><a href="#cli-perspective" class="table-of-contents__link toc-highlight">CLI Perspective</a></li></ul></li><li><a href="#other-thoughts" class="table-of-contents__link toc-highlight">Other Thoughts:</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Products</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/odpf/meteor" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meteor<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/odpf/firehose" target="_blank" rel="noopener noreferrer" class="footer__link-item">Firehose<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/odpf/raccoon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Raccoon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://odpf.github.io/dagger/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dagger<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/optimus/docs/introduction">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/optimus/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/optimus/help">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://bit.ly/2RzPbtn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/odpf/optimus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2020-2023 ODPF</div></div></div></footer></div>
<script src="/optimus/assets/js/runtime~main.35534b05.js"></script>
<script src="/optimus/assets/js/main.0c2553fe.js"></script>
</body>
</html>